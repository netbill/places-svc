openapi: 3.1.0
info:
  title: Place Service API
  description: API for managing places and their classes.
  version: 0.0.1
paths:
  /test:
    post:
      tags:
        - Test
      description: Test
      responses:
        '201':
          description: successfully
components:
  schemas:
    CreatePlace:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - type
            - attributes
          properties:
            type:
              type: string
              enum:
                - place
            attributes:
              type: object
              required:
                - class_id
                - organization_id
                - point
                - address
                - name
              properties:
                class_id:
                  type: string
                  format: uuid
                  description: The ID of the class this place belongs to
                organization_id:
                  type: string
                  format: uuid
                  description: The ID of the organization this place belongs to
                point:
                  type: object
                  required:
                    - latitude
                    - longitude
                  properties:
                    latitude:
                      type: number
                      format: float64
                      description: The latitude coordinate of the place
                    longitude:
                      type: number
                      format: float64
                      description: The longitude coordinate of the place
                address:
                  type: string
                  description: The physical address of the place
                name:
                  type: string
                  description: The name of the place
                description:
                  type: string
                  description: A brief description of the place
                website:
                  type: string
                  format: uri
                  description: The website URL of the place
                phone:
                  type: string
                  description: The contact phone number of the place
    UpdatePlace:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
          properties:
            id:
              type: string
              format: uuid
              description: The unique identifier of the place
            type:
              type: string
              enum:
                - place
            attributes:
              type: object
              required:
                - class_id
                - name
                - address
              properties:
                class_id:
                  type: string
                  format: uuid
                  description: 'The class ID of the place (e.g., restaurant, park)'
                name:
                  type: string
                  description: The name of the place
                address:
                  type: string
                  description: The address of the place
                description:
                  type: string
                  description: A brief description of the place
                icon_key:
                  type: string
                  description: The S3 key for the place's icon image
                banner_key:
                  type: string
                  description: The S3 key for the place's banner image
                website:
                  type: string
                  description: The website URL of the place
                phone:
                  type: string
                  description: The contact phone number of the place
    UpdatePlaceClass:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
          properties:
            id:
              type: string
              format: uuid
              description: The unique identifier for the place class
            type:
              type: string
              enum:
                - place_class
            attributes:
              type: object
              required:
                - name
                - description
              properties:
                parent_id:
                  type: string
                  format: uuid
                  description: 'The ID of the parent class, if any'
                name:
                  type: string
                  description: The name of the class
                description:
                  type: string
                  description: A brief description of the class
                icon_key:
                  type: string
                  description: The S3 key for the class icon
    UpdatePlaceStatus:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
          properties:
            id:
              type: string
              format: uuid
              description: The unique identifier of the place
            type:
              type: string
              enum:
                - update_place
            attributes:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  description: The new status of the place
    UpdatePlaceVerify:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
          properties:
            id:
              type: string
              format: uuid
              description: The unique identifier of the place
            type:
              type: string
              enum:
                - update_place
            attributes:
              type: object
              required:
                - verify
              properties:
                verify:
                  type: boolean
                  description: The new verify status of the place
    CreatePlaceClass:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - type
            - attributes
          properties:
            type:
              type: string
              enum:
                - place_class
            attributes:
              type: object
              required:
                - name
                - description
              properties:
                parent_id:
                  type: string
                  format: uuid
                  description: 'The ID of the parent class, if any'
                name:
                  type: string
                  description: The name of the class
                description:
                  type: string
                  description: A brief description of the class
    DeprecatedPlaceClass:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
          properties:
            id:
              type: string
              format: uuid
              description: The unique identifier for the place class
            type:
              type: string
              enum:
                - place_class
            attributes:
              type: object
              required:
                - deprecated
              properties:
                deprecated:
                  type: boolean
                  description: place class is deprecated?
    DeleteUploadPlaceIcon:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
          properties:
            id:
              type: string
              format: uuid
              description: place id
            type:
              type: string
              enum:
                - place
            attributes:
              type: object
              required:
                - icon_key
              properties:
                icon_key:
                  type: string
                  description: icon media key
    DeleteUploadPlaceBanner:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
          properties:
            id:
              type: string
              format: uuid
              description: place id
            type:
              type: string
              enum:
                - place
            attributes:
              type: object
              required:
                - banner_key
              properties:
                banner_key:
                  type: string
                  description: icon media key
    DeleteUploadPlaceClassIcon:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
          properties:
            id:
              type: string
              format: uuid
              description: place class id
            type:
              type: string
              enum:
                - place_class
            attributes:
              type: object
              required:
                - icon_key
              properties:
                icon_key:
                  type: string
                  description: icon media key
    PaginationData:
      type: object
      required:
        - self
      properties:
        self:
          type: string
          format: uri
          description: link to the current page
        first:
          type: string
          format: uri
          description: link to the first page
        last:
          type: string
          format: uri
          description: link to the last page
        prev:
          type: string
          format: uri
          description: link to the previous page
        next:
          type: string
          format: uri
          description: link to the next page
    Place:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
            - relationships
          properties:
            id:
              type: string
              format: uuid
              description: place ID
            type:
              type: string
              enum:
                - place
            attributes:
              type: object
              required:
                - status
                - verified
                - point
                - address
                - name
                - version
                - created_at
                - updated_at
              properties:
                status:
                  type: string
                  description: 'The status of the place (e.g., active, inactive)'
                verified:
                  type: boolean
                  description: Indicates if the place has been verified
                point:
                  $ref: '#/components/schemas/CreatePlace/properties/data/properties/attributes/properties/point'
                address:
                  type: string
                  description: The physical address of the place
                name:
                  type: string
                  description: The name of the place
                description:
                  type: string
                  description: A brief description of the place
                icon_key:
                  type: string
                  format: uri
                  description: A URL to an icon representing the place
                banner_key:
                  type: string
                  format: uri
                  description: A URL to a banner image for the place
                website:
                  type: string
                  format: uri
                  description: The website URL of the place
                phone:
                  type: string
                  description: The contact phone number of the place
                version:
                  type: integer
                  description: 'The version number of the place data, used for concurrency control'
                created_at:
                  type: string
                  format: date-time
                  description: The date and time when the place was created
                updated_at:
                  type: string
                  format: date-time
                  description: The date and time when the place was last updated
            relationships:
              type: object
              required:
                - organization
                - place_class
              properties:
                organization:
                  type: object
                  required:
                    - id
                    - type
                  properties:
                    id:
                      type: string
                      format: uuid
                      description: The ID of the organization associated with the place
                    type:
                      type: string
                      enum:
                        - organization
                place_class:
                  type: object
                  required:
                    - id
                    - type
                  properties:
                    id:
                      type: string
                      format: uuid
                      description: The ID of the class associated with the place
                    type:
                      type: string
                      enum:
                        - place_class
        included:
          type: array
          description: 'Included related resources (e.g., organization)'
          items:
            oneOf:
              - $ref: '#/components/schemas/OrganizationData'
              - $ref: '#/components/schemas/PlaceClassData'
    PlacesCollection:
      type: object
      required:
        - data
        - links
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Place/properties/data'
        links:
          $ref: '#/components/schemas/PaginationData'
    PlaceClass:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/PlaceClassData'
        included:
          type: array
          description: 'Included related resources (e.g., organization)'
          items:
            oneOf:
              - $ref: '#/components/schemas/PlaceClassData'
    PlaceClassData:
      type: object
      required:
        - id
        - type
        - attributes
      properties:
        id:
          type: string
          format: uuid
          description: place ID
        type:
          type: string
          enum:
            - place_class
        attributes:
          type: object
          required:
            - name
            - description
            - version
            - updated_at
            - created_at
          properties:
            name:
              type: string
              description: The name of the class
            description:
              type: string
              description: A brief description of the class
            icon_key:
              type: string
              format: uri
              description: A URL to an icon representing the class
            version:
              type: integer
              description: 'The version number of the class data, used for concurrency control'
            created_at:
              type: string
              format: date-time
              description: The date and time when the class was created
            updated_at:
              type: string
              format: date-time
              description: The date and time when the class was last updated
            deprecated_at:
              type: string
              format: date-time
              description: 'The date and time when the class was deprecated, if applicable'
        relationships:
          type: object
          properties:
            parent:
              type: object
              required:
                - id
                - type
              properties:
                id:
                  type: string
                  format: uuid
                  description: The ID of the parent class
                type:
                  type: string
                  enum:
                    - place_class
    PlaceClassesCollection:
      type: object
      required:
        - data
        - links
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/PlaceClassData'
        links:
          $ref: '#/components/schemas/PaginationData'
    Organization:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/OrganizationData'
    OrganizationData:
      type: object
      required:
        - id
        - type
        - attributes
      properties:
        id:
          type: string
          format: uuid
          description: organization ID
        type:
          type: string
          enum:
            - organization
        attributes:
          type: object
          required:
            - status
            - name
            - version
            - created_at
            - updated_at
          properties:
            status:
              type: string
              description: The status of the organization
            name:
              type: string
              description: The name of the organization
            icon_key:
              type: string
              description: The media key for the organization's icon
            banner_key:
              type: string
              description: The media key for the organization's banner
            version:
              type: integer
              description: 'The version number of the organization, used for optimistic concurrency control'
            created_at:
              type: string
              format: date-time
              description: The date and time when the organization was created
            updated_at:
              type: string
              format: date-time
              description: The date and time when the organization was last updated
    UploadPlaceClassMediaLinks:
      type: object
      required:
        - data
        - included
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
            - relationships
          properties:
            id:
              type: string
              format: uuid
              description: place class id
            type:
              type: string
              enum:
                - place_class_upload_links
            attributes:
              type: object
              required:
                - icon
                - banner
              properties:
                icon:
                  $ref: '#/components/schemas/UploadResourcesLink'
            relationships:
              type: object
              properties:
                place_class:
                  type: object
                  required:
                    - data
                  properties:
                    data:
                      type: object
                      required:
                        - id
                        - type
                      properties:
                        id:
                          type: string
                          format: uuid
                          description: place id
                        type:
                          type: string
                          enum:
                            - place_class
        included:
          type: array
          items:
            $ref: '#/components/schemas/PlaceClassData'
    UploadPlaceMediaLinks:
      type: object
      required:
        - data
        - included
      properties:
        data:
          type: object
          required:
            - id
            - type
            - attributes
            - relationships
          properties:
            id:
              type: string
              format: uuid
              description: place id
            type:
              type: string
              enum:
                - place_upload_links
            attributes:
              type: object
              required:
                - icon
                - banner
              properties:
                icon:
                  $ref: '#/components/schemas/UploadResourcesLink'
                banner:
                  $ref: '#/components/schemas/UploadResourcesLink'
            relationships:
              type: object
              properties:
                place:
                  type: object
                  required:
                    - data
                  properties:
                    data:
                      type: object
                      required:
                        - id
                        - type
                      properties:
                        id:
                          type: string
                          format: uuid
                          description: place id
                        type:
                          type: string
                          enum:
                            - place
        included:
          type: array
          items:
            $ref: '#/components/schemas/Place/properties/data'
    UploadResourcesLink:
      type: object
      required:
        - key
        - upload_url
        - preload_url
      properties:
        key:
          type: string
          description: Key for the avatar in the storage service
        upload_url:
          type: string
          format: uri
          description: Pre-signed URL for uploading the avatar
        preload_url:
          type: string
          format: uri
          description: URL for preloading the avatar after upload
